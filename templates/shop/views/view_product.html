{% extends "base.html" %}
{% load static %}

{% block title %}{{ product.product_name }} - Product Detail{% endblock %}

{% block content %}



<!-- ================= PRODUCT DETAIL SECTION ================= -->

<div class="product-detail-wrapper">

    <!-- PRODUCT IMAGE -->
    <div class="product-image-box">
        <img src="{{ product.product_image.url }}" alt="{{ product.product_name }}">
    </div>

    <!-- PRODUCT INFORMATION -->
    <div class="product-info">

        <h1 class="product-name">{{ product.product_name }}</h1>
        <div class="product-price">$ {{ product.product_price }}</div>

        <!-- STOCK BADGES -->
        {% if product.product_stock > 9 %}
            <span class="stock-status stock-in">In Stock</span>
        {% elif product.product_stock == 0 %}
            <span class="stock-status stock-out">Out of Stock</span>
        {% else %}
            <span class="stock-status stock-low">Hurry! Only {{ product.product_stock }} left</span>
        {% endif %}

        <p class="product-desc">
            {{ product.product_detail }}
        </p>

        <!-- ACTION BUTTONS -->
        <form action="{% url 'add_to_cart' product.id %}" method="post">
            {% csrf_token %}
            <input type="hidden" name="qty" value="1">

            <div class="action-buttons">

                <button type="submit" formaction="{% url 'add_to_wishlist' product.id %}"
                        class="btn wishlist-btn">
                    Add to Wishlist
                </button>

                <button type="submit" class="btn">
                    Add to Cart
                </button>
            </div>

        </form>

        <!-- BUY NOW BUTTON -->
        <a href="{% url 'checkout' %}?get_id={{ product.id }}" class="btn"
           style="margin-top: 18px; display:block; text-align:center;">
            Buy Now
        </a>
    </div>
</div>



<!-- ================= SIMILAR PRODUCTS SECTION ================= -->

<div class="similar-section">
    <h1>Similar Products</h1>
    <img src="{% static 'image/separator-img.png' %}" alt="">

    <div class="similar-grid">

        {% if similar %}
            {% for item in similar %}
            <div class="similar-box">

                <img src="{{ item.product_image.url }}" alt="{{ item.product_name }}">

                <h3 class="similar-name">{{ item.product_name }}</h3>
                <p class="similar-price">$ {{ item.product_price }}</p>

                <a href="{% url 'view_product' item.id %}" class="small-btn">View</a>
            </div>
            {% endfor %}
        {% else %}
            <p>No similar products found.</p>
        {% endif %}

    </div>
</div>

{% endblock %}
